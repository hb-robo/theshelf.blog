---
import BaseLayout from '../layouts/BaseLayout.astro';
import MediaCard from '../components/MediaCard.astro';
import { getExpandedMediaList } from '../lib/expandMediaItems.ts';
import type { ExpandedMediaItem } from '../lib/types.ts';

const expandedMediaList: ExpandedMediaItem[] = await getExpandedMediaList();

const totalMedia = expandedMediaList.length;
const onShelf = expandedMediaList.filter(m => m.result === "made-the-shelf").length;
const reviewed = expandedMediaList.filter(m => m.published).length;
---

<BaseLayout title="media library">
  <section class="max-w-6xl mx-auto px-4 py-12">
    <header class="mb-8">
      <h1 class="text-4xl font-bold mb-4 text-gray-900 dark:text-gray-100">media library</h1>
      <p>All the stuff I've written about, or plan to.</p>
    </header>
    <div class="grid gap-6 md:grid-cols-1 lg:grid-cols-2 items-start">
      {expandedMediaList.map((m) => <MediaCard itemData={m} />)}
    </div>
  </section>
</BaseLayout>
